<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ewing.query.dao.AuthorityDao">
  <select id="getUserAuthorities" parameterType="java.lang.Long"
          resultType="ewing.security.vo.AuthorityNode">
    select a.authority_id, a.name, a.code, a.type, a.content, a.parent_id
    from authority a
    join role_authority ra on a.authority_id = ra.authority_id
    join role r on r.role_id = ra.role_id
    join user_role ur on r.role_id = ur.role_id
    where ur.user_id = #{userId,jdbcType=BIGINT}
  </select>
</mapper>